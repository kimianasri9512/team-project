<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ุณุจุฏ ุฎุฑุฏ | ูุฑูุดฺฏุงู ูููุงู</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <div class="container">
    <div class="nav">
      <a class="brand" href="index.html"><span class="logo"></span><b>ูุฑูุดฺฏุงู ูููุงู</b></a>
      <div class="navlinks">
        <a class="pill" href="index.html">ุฎุงูู</a>
        <a class="pill" href="products.html">ูุญุตููุงุช</a>
        <a class="pill" href="reviews.html">ูุธุฑุงุช</a>
        <a class="pill" href="checkout.html">ุซุจุช ุณูุงุฑุด</a>
        <a class="pill active" href="cart.html">ุณุจุฏ (<span data-cartcount>0</span>)</a>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <section class="card">
    <h1 style="margin:0 0 10px">ุณุจุฏ ุฎุฑุฏ</h1>
    <p>ุณุจุฏ</p>
    <hr />
    <div id="cartList"></div>
    <hr />
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
      <div><b>ุฌูุน ฺฉู:</b> <span id="total">0</span></div>
      <div class="btnrow" style="margin:0">
        <button class="btn red" onclick="clearCart(); renderCart(); toast('ุณุจุฏ ูพุงฺฉ ุดุฏ ๐๏ธ')">ูพุงฺฉ ฺฉุฑุฏู ุณุจุฏ</button>
        <a class="btn green" href="checkout.html">ุฑูุชู ุจู ุซุจุช ุณูุงุฑุด</a>
      </div>
    </div>
  </section>

  <div class="footer">ยฉ ูุฑูุดฺฏุงู ูููุงู</div>
  <h1>ุงู ูุฑุงุด 1 ูุฏ ุงุญูุฏ ูุจุงุดุฏ</h1>
  <h1>ุงู ูุชู ุจุฑุง ุญุฐู ูุจุงุดุฏ</h1>
</main>

<div class="toast"></div>
<script src="app.js"></script>
<script>
function renderCart(){
  const list = document.getElementById("cartList");
  const totalEl = document.getElementById("total");
  const cart = getCart();

  if(cart.length === 0){
    list.innerHTML = <div class="card"><b>ุณุจุฏ ุฎุงูู.</b><p>ุงุฒ ุตูุญู ูุญุตููุงุช ฺุฒ ุงุถุงูู ฺฉู.</p><a class="btn" href="products.html">ุฑูุชู ุจู ูุญุตููุงุช</a></div>;
    totalEl.textContent = "0";
    updateCartCount();
    return;
  }

  let total = 0;
  list.innerHTML = cart.map(item => {
    total += item.price * item.qty;
    return `
      <div class="card" style="display:flex;justify-content:space-between;gap:12px;align-items:center;flex-wrap:wrap">
        <div style="display:flex;gap:12px;align-items:center">
          <div class="thumb"></div>
          <div>
            <b>${item.name}</b><br>
            <small>ุชุนุฏุงุฏ: ${item.qty}</small>
          </div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <div class="price">${(item.price * item.qty).toLocaleString('fa-IR')}</div>
          <button class="btn red" onclick="removeFromCart('${item.id}'); renderCart(); toast('ุญุฐู ุดุฏ โ')">ุญุฐู</button>
        </div>
      </div>
    `;
  }).join("");

  totalEl.textContent = total.toLocaleString('fa-IR');
  updateCartCount();
}
document.addEventListener("DOMContentLoaded", renderCart);
</script>
</body>
</html>