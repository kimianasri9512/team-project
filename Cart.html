<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯ | ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
<header>
  <div class="container">
    <div class="nav">
      <a class="brand" href="index.html"><span class="logo"></span><b>ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„</b></a>
      <div class="navlinks">
        <a class="pill" href="index.html">Ø®Ø§Ù†Ù‡</a>
        <a class="pill" href="products.html">Ù…Ø­ØµÙˆÙ„Ø§Øª</a>
        <a class="pill" href="reviews.html">Ù†Ø¸Ø±Ø§Øª</a>
        <a class="pill" href="checkout.html">Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</a>
        <a class="pill active" href="cart.html">Ø³Ø¨Ø¯ (<span data-cartcount>0</span>)</a>
      </div>
    </div>
  </div>
</header>

<main class="container">
  <section class="card">
    <h1 style="margin:0 0 10px">Ø³Ø¨Ø¯ Ø®Ø±ÛŒØ¯</h1>
    <p>Ø³Ø¨Ø¯</p>
    <hr />
    <div id="cartList"></div>
    <hr />
    <div style="display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap">
      <div><b>Ø¬Ù…Ø¹ Ú©Ù„:</b> <span id="total">0</span></div>
      <div class="btnrow" style="margin:0">
        <button class="btn red" onclick="clearCart(); renderCart(); toast('Ø³Ø¨Ø¯ Ù¾Ø§Ú© Ø´Ø¯ ğŸ—‘ï¸')">Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø³Ø¨Ø¯</button>
        <a class="btn green" href="checkout.html">Ø±ÙØªÙ† Ø¨Ù‡ Ø«Ø¨Øª Ø³ÙØ§Ø±Ø´</a>
      </div>
    </div>
  </section>

  <div class="footer">Â© ÙØ±ÙˆØ´Ú¯Ø§Ù‡ Ù…ÛŒÙ†ÛŒÙ…Ø§Ù„</div>
</main>

<div class="toast"></div>
<script src="app.js"></script>
<script>
function renderCart(){
  const list = document.getElementById("cartList");
  const totalEl = document.getElementById("total");
  const cart = getCart();

  if(cart.length === 0){
    list.innerHTML = <div class="card"><b>Ø³Ø¨Ø¯ Ø®Ø§Ù„ÛŒÙ‡.</b><p>Ø§Ø² ØµÙØ­Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª Ú†ÛŒØ²ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†.</p><a class="btn" href="products.html">Ø±ÙØªÙ† Ø¨Ù‡ Ù…Ø­ØµÙˆÙ„Ø§Øª</a></div>;
    totalEl.textContent = "0";
    updateCartCount();
    return;
  }

  let total = 0;
  list.innerHTML = cart.map(item => {
    total += item.price * item.qty;
    return `
      <div class="card" style="display:flex;justify-content:space-between;gap:12px;align-items:center;flex-wrap:wrap">
        <div style="display:flex;gap:12px;align-items:center">
          <div class="thumb"></div>
          <div>
            <b>${item.name}</b><br>
            <small>ØªØ¹Ø¯Ø§Ø¯: ${item.qty}</small>
          </div>
        </div>
        <div style="display:flex;gap:10px;align-items:center">
          <div class="price">${(item.price * item.qty).toLocaleString('fa-IR')}</div>
          <button class="btn red" onclick="removeFromCart('${item.id}'); renderCart(); toast('Ø­Ø°Ù Ø´Ø¯ âŒ')">Ø­Ø°Ù</button>
        </div>
      </div>
    `;
  }).join("");

  totalEl.textContent = total.toLocaleString('fa-IR');
  updateCartCount();
}
document.addEventListener("DOMContentLoaded", renderCart);
</script>
</body>
</html>